#/bin/bash

wz() {
	git clone "git://git.gnome.org/$1"
	cd $1
	git remote set-url origin "ssh://git.gnome.org/git/$1";
	git remote add git git://git.gnome.org/$1 && git fetch git
	cd po
	gnome -t $1
	exit;
}

usage() {
	echo "usage:
	$0 OPTION
	OPTION is:
	-f	browser Debian sid package
	-b	report bug
	-t	download pot file from master branch
	-s	download pot file from stable branch
	-p	download po file from master branch
	-i	browser git repo on git.debian.org
	-g	add 'git' repo using git:// protocol
	-G	browser GNOME directory in Nautilus
	-u	browser on github.com
	-U	merge vi.po with POT file at the same directory
	-w	wizard
	-W	go to Wiki of package
	-m	go to module page
	-H	go to Homepage
	-h	help

Project infomations:

# Copyright © $(date +%Y) GNOME i18n Project for Vietnamese.
# This file is distributed under the same license as the PACKAGE package.
Vietnamese <gnome-vi-list@gnome.org>
Nhóm Việt hóa GNOME (https://l10n.gnome.org/teams/vi/)

Git:
 * git://git.gnome.org/PACKAGE
 * ssh://git.gnome.org/git/PACKAGE
"
	exit;
}

# define stable branch
stable='gnome-3-14'
projectdir='/mnt/E/MyProjects/GNOME'

# get parent dir
getdir () {
# cd ../
# parent=$(basename `pwd`)
# cd -

	pushd $(pwd)
	cd ../
	parent=$(basename `pwd`)
	popd
}

if [[ "$#" -lt "1" ]]; then
	usage
fi

while getopts "f:b:t:s:p:i:g:Gu:Uw:W:m:hH" opt; do
  case $opt in
    f)
      firefox https://packages.debian.org/sid/$OPTARG &
      ;;
    t)
      rm -v *.pot *~
      wget --timestamping https://l10n.gnome.org/POT/$OPTARG.master/$OPTARG.master.pot
      msgmerge --verbose --update vi.po $OPTARG.master.pot
      ;;
    s)
      wget --timestamping https://l10n.gnome.org/POT/$OPTARG.$stable/$OPTARG.$stable.pot
      ;;
    p)
      wget --timestamping https://l10n.gnome.org/POT/$OPTARG.master/$OPTARG.master.vi.po
      ;;
    b)
      firefox https://bugzilla.gnome.org/enter_bug.cgi?product=$OPTARG &
      ;;
    i)
      firefox https://git.gnome.org/browse/$OPTARG/ &
      ;;
    g)
      git remote add git git://git.gnome.org/$OPTARG && git fetch git
    ;;
    G)
      nautilus $projectdir &
      ;;
    u)
      firefox https://github.com/GNOME/$OPTARG/ &
      ;;
    U)
      msgmerge --verbose --update *vi.po *.pot
      ;;
    w)
      wz $OPTARG
      ;;
    W)
      firefox https://wiki.gnome.org/Apps/$OPTARG &
      ;;
    m)
      firefox https://l10n.gnome.org/module/$OPTARG &
      ;;
    H)
	  firefox https://l10n.gnome.org/teams/vi/ &
      ;;
    h|*)
	usage
      ;;
  esac
done

